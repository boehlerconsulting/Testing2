<!--
/**
 *@author       Mats Böhler
 *@created      08.04.2021
 *
 *
 *@description  einrichtungsKonfiguratorAbbau
 *
 *
 *@changelog    08.04.2021 Mats Böhler - Created
 *              
 * 
 */
 -->

<!-- Einrichtungs Konfigurator Abbau -->
<template>

    <lightning-spinner if:true={showSpinner} alternative-text="Loading" size="medium"
                       variant="base"></lightning-spinner>

    <template if:true={isInitialized}>
        <template if:true={hasProducts}>
            <div class="slds-text-heading_medium slds-m-top_large">{title}</div>
            <lightning-layout>

                <lightning-layout-item size="12">

                    <lightning-accordion allow-multiple-sections-open active-section-name={activeSections}>


                        <template for:each={categories} for:item="category" for:index="categoryIndex">

                            <template if:false={category.hide}>

                                <lightning-accordion-section name={category.title}
                                                             label={category.title} key={category.Id}>

                                    <c-einrichtungs-bundle-abbau
                                            key={category.Id}
                                            category-index={categoryIndex}
                                            options={category.products}
                                            option-by-ids={optionByIds}
                                            account={account}
                                            category-title={category.title}
                                            is-einrichtungskoordinator={isEinrichtungskoordinator}
                                            is-top-level=true
                                            is-abbau-zusatz={isZusatz}
                                            process={process}
                                            onselected={handleOptionChange}
                                           onchanged={handleChange}
                                    ></c-einrichtungs-bundle-abbau>

                                </lightning-accordion-section>

                            </template>

                        </template>

                    </lightning-accordion>

                </lightning-layout-item>

            </lightning-layout>
        </template>

    </template>

</template>